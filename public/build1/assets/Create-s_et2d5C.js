import{W as F,r as t,j as e,Y as C,a as I}from"./app-4CarAZae.js";import{A as E,a as D,R as T}from"./AuthenticatedLayout-DlZAqirn.js";import{I as r}from"./InputError-BzZEBFuT.js";import{I as d}from"./InputLabel-D2XIgsB6.js";import{S as A}from"./ScrollBar-2ExapV3B.js";import{S as o}from"./SearchableDropdownForm-D-zmHbTx.js";import{T as B}from"./TextInput-DyNG2S4m.js";import{T as P}from"./Title-Dy3FFUwd.js";import"./ApplicationLogo-Dv8uwSlW.js";import"./transition-B3zTIZ2S.js";import"./NavLink-Bq0O64v2.js";import"./DarkMode-Bf1Neqjf.js";import"./iconBase-TbwvlisU.js";import"./ResponsiveMenu-BnbI3YqC.js";import"./index-_Gq6pFcl.js";import"./Modal-DeS_P8Lr.js";function ee({auth:y,categories:x,products:N,services:_,kinds:b,message:h}){const{data:n,setData:a,post:k,errors:i,reset:R}=F({amount:"0",kind:"const",service_id:"",kind_id:""}),[l,S]=t.useState(""),[m,p]=t.useState(""),[j,v]=t.useState([]),[w,c]=t.useState([]),[f,g]=t.useState(!1);t.useEffect(()=>{if(l){const s=N.data.filter(u=>u.category_id===l);v(s||[]),c([]),p(""),a("service_id","")}},[l,x]),t.useEffect(()=>{if(m){const s=_.data.filter(u=>u.product_id===m);c(s||[]),a("service_id","")}},[m,j]);const K=s=>{s.preventDefault(),k(route("amountkind.store"))};return e.jsxs(E,{user:y.user,message:h,header:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(P,{children:"إنشاء سعر جديد"}),e.jsx(A,{message:h})]}),children:[e.jsx(C,{title:"أسعار المنتجات"}),e.jsx("div",{className:"py-2",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("form",{onSubmit:K,className:"px-4 sm:px-8 pt-4 bg-white dark:bg-gray-800 shadow sm:rounded-lg",children:[e.jsxs("div",{className:"grid lg:grid-cols-3 sm:grid-cols-1 gap-4",children:[e.jsxs("div",{className:"mt-1",children:[e.jsx(d,{htmlFor:"category_id",value:"التصنيف"}),e.jsx(o,{items:x.data,value:l,onChange:s=>S(s),placeholder:"اختر التصنيف",labelKey:"name",valueKey:"id"}),e.jsx(r,{message:i.category_id,className:"mt-2"})]}),e.jsxs("div",{className:"mt-1",children:[e.jsx(d,{htmlFor:"product_id",value:"المنتج"}),e.jsx(o,{items:j,value:m,onChange:s=>p(s),placeholder:"اختر المنتج",labelKey:"name",valueKey:"id",disabled:!l}),e.jsx(r,{message:i.product_id,className:"mt-2"})]}),e.jsxs("div",{className:"mt-1",children:[e.jsx(d,{htmlFor:"service_id",value:"الخدمة"}),e.jsx(o,{items:w,value:n.service_id,onChange:s=>a("service_id",s),placeholder:"اختر الخدمة",labelKey:"name",valueKey:"id",disabled:!m}),e.jsx(r,{message:i.service_id,className:"mt-2"})]}),e.jsxs("div",{className:"mt-1",children:[e.jsx(d,{htmlFor:"kind_id",value:"تفاصيل الخدمة"}),e.jsx(o,{items:b.data,value:n.kind_id,onChange:s=>a("kind_id",s),placeholder:"اختر تفصيل الخدمة",labelKey:"name",valueKey:"id",disabled:f}),e.jsx(r,{message:i.kind_id,className:"mt-2"})]}),e.jsxs("div",{className:"mt-1",children:[e.jsx(d,{htmlFor:"kind",value:"طريقة الحساب"}),e.jsx(o,{items:[{id:"const",name:"ثابت"},{id:"var",name:"متغير"}],value:n.kind,onChange:s=>{s==="var"?(a({amount:0,kind:s}),g(!0)):(a("kind",s),g(!1))},placeholder:"اختر طريقة الحساب",labelKey:"name",valueKey:"id"}),e.jsx(r,{message:i.kind,className:"mt-2"})]}),e.jsxs("div",{className:"mt-1",children:[e.jsx(d,{htmlFor:"amount",value:"السعر"}),e.jsx(B,{id:"amount",type:"number",min:"0",name:"amount",value:n.amount,className:"block w-full h-10",disabled:f,onChange:s=>a("amount",s.target.value)}),e.jsx(r,{message:i.amount,className:"mt-2"})]})]}),e.jsxs("div",{className:"text-center py-8",children:[e.jsx(D,{className:"w-28 justify-center",children:"موافق"}),e.jsx(I,{href:route("amountkind.index"),children:e.jsx(T,{className:"w-28 justify-center",children:"إلغاء الأمر"})})]})]})})})})]})}export{ee as default};
