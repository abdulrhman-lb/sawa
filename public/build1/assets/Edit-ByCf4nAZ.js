import{W as L,r as t,j as e,Y as M,a as W}from"./app-4CarAZae.js";import{A as Y,a as q,R as z}from"./AuthenticatedLayout-DlZAqirn.js";import{I as r}from"./InputError-BzZEBFuT.js";import{I as o}from"./InputLabel-D2XIgsB6.js";import{S as G}from"./ScrollBar-2ExapV3B.js";import{S as u}from"./SearchableDropdownForm-D-zmHbTx.js";import{T as H}from"./TextAreaInput-D3aa6kLy.js";import{T as J}from"./TextInput-DyNG2S4m.js";import{T as O}from"./Title-Dy3FFUwd.js";import"./ApplicationLogo-Dv8uwSlW.js";import"./transition-B3zTIZ2S.js";import"./NavLink-Bq0O64v2.js";import"./DarkMode-Bf1Neqjf.js";import"./iconBase-TbwvlisU.js";import"./ResponsiveMenu-BnbI3YqC.js";import"./index-_Gq6pFcl.js";import"./Modal-DeS_P8Lr.js";function xe({auth:x,comission:a,comissions:S,categories:v,products:w,services:K,amount_kinds:F,users:I,message:h}){const{data:p,setData:_,put:C,errors:i,reset:Q}=L({user_id:a.user_id||"",amount_kind_id:a.amount_kind_id||"",comission_admin:a.comission_admin||"0",comission_super:a.comission_super||"0",notes:a.notes||"",officer_id:a.officer_id||x.user.id}),[m,E]=t.useState(a.amount_kind.service.product.category_id||""),[d,f]=t.useState(a.amount_kind.service.product_id||""),[l,g]=t.useState(a.amount_kind.service_id||""),[N,A]=t.useState([]),[y,b]=t.useState([]),[T,j]=t.useState([]),[D,U]=t.useState(!1);t.useEffect(()=>{if(m){const s=w.data.filter(n=>n.category_id===m);A(s),b([]),j([]),d||f("")}},[m,v]),t.useEffect(()=>{if(d){const s=K.data.filter(n=>n.product_id===d);b(s),j([]),l||g("")}},[d,N]),t.useEffect(()=>{if(l){const n=F.data.filter(c=>{const P=c.service_id===l,R=S.data.find(k=>k.user_id===x.user.id&&k.amount_kind_id===c.id||x.user.kind==="admin");return P&&R}).map(c=>({...c,kindName:c.kindName.name}));j(n)}},[l,y]);const B=s=>{s.preventDefault(),C(route("comission.update",a.id))};return e.jsxs(Y,{user:x.user,message:h,header:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(O,{children:"تعديل عمولة"}),e.jsx(G,{message:h})]}),children:[e.jsx(M,{title:"تعديل العمولة"}),e.jsx("div",{className:"py-2",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("form",{onSubmit:B,className:"px-4 sm:px-8 pt-4 bg-white dark:bg-gray-800 shadow sm:rounded-lg",children:[e.jsxs("div",{className:"grid lg:grid-cols-3 sm:grid-cols-1",children:[e.jsxs("div",{className:"mt-4 px-3",children:[e.jsx(o,{htmlFor:"category_id",value:"التصنيف"}),e.jsx(u,{items:v.data,value:m,onChange:s=>E(s),placeholder:"اختر التصنيف",labelKey:"name",valueKey:"id"}),e.jsx(r,{message:i.category_id,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4 px-3",children:[e.jsx(o,{htmlFor:"product_id",value:"المنتج"}),e.jsx(u,{items:N,value:d,onChange:s=>f(s),placeholder:"اختر المنتج",labelKey:"name",valueKey:"id",disabled:!m}),e.jsx(r,{message:i.product_id,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4 px-3",children:[e.jsx(o,{htmlFor:"service_id",value:"الخدمة"}),e.jsx(u,{items:y,value:l,onChange:s=>g(s),placeholder:"اختر الخدمة",labelKey:"name",valueKey:"id",disabled:!d}),e.jsx(r,{message:i.service_id,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4 px-3",children:[e.jsx(o,{htmlFor:"kind_id",value:"تفاصيل الخدمة"}),e.jsx(u,{items:T,value:p.amount_kind_id,onChange:s=>_("amount_kind_id",s),placeholder:"اختر تفاصيل الخدمة",labelKey:"kindName",valueKey:"id",disabled:!d}),e.jsx(r,{message:i.amount_kind_id,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4 px-3",children:[e.jsx(o,{htmlFor:"user_id",value:"المركز"}),e.jsx(u,{items:I.data,value:p.user_id,onChange:s=>_("user_id",s),placeholder:"اختر المركز",labelKey:"name",valueKey:"id",disabled:!1}),e.jsx(r,{message:i.user_id,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4 px-3",children:[e.jsx(o,{htmlFor:"comission_admin",value:"العمولة"}),e.jsx(J,{id:"comission_admin",type:"number",min:"0",name:"comission_admin",value:p.comission_admin,className:" block w-full h-[40px]",disabled:D,onChange:s=>_("comission_admin",s.target.value)}),e.jsx(r,{message:i.comission_admin,className:"mt-2"})]})]}),e.jsxs("div",{className:"mt-4 px-3",children:[e.jsx(o,{htmlFor:"category_notes",value:"ملاحظات"}),e.jsx(H,{id:"category_notes",name:"notes",value:p.notes,className:"mt-1 block w-full",onChange:s=>_("notes",s.target.value)}),e.jsx(r,{message:i.notes,className:"mt-2"})]}),e.jsxs("div",{className:"text-center py-8",children:[e.jsx(q,{className:"w-28 justify-center",children:"موافق"}),e.jsx(W,{href:route("comission.index"),children:e.jsx(z,{className:"w-28 justify-center",children:"إلغاء الأمر"})})]})]})})})})]})}export{xe as default};
