import{W as R,r as a,j as e,Y as L,a as M}from"./app-4CarAZae.js";import{A as W,a as Y,R as q}from"./AuthenticatedLayout-DlZAqirn.js";import{I as r}from"./InputError-BzZEBFuT.js";import{I as d}from"./InputLabel-D2XIgsB6.js";import{S as z}from"./ScrollBar-2ExapV3B.js";import{S as u}from"./SearchableDropdownForm-D-zmHbTx.js";import{T as G}from"./TextAreaInput-D3aa6kLy.js";import{T as H}from"./TextInput-DyNG2S4m.js";import{T as J}from"./Title-Dy3FFUwd.js";import"./ApplicationLogo-Dv8uwSlW.js";import"./transition-B3zTIZ2S.js";import"./NavLink-Bq0O64v2.js";import"./DarkMode-Bf1Neqjf.js";import"./iconBase-TbwvlisU.js";import"./ResponsiveMenu-BnbI3YqC.js";import"./index-_Gq6pFcl.js";import"./Modal-DeS_P8Lr.js";function ue({auth:x,comissions:S,categories:h,products:k,services:w,amount_kinds:K,users:F,message:_}){const{data:m,setData:i,post:C,errors:t,reset:O}=R({user_id:"",amount_kind_id:"",comission_admin:"0",notes:"",officer_id:x.user.id}),[n,I]=a.useState(""),[o,f]=a.useState(""),[v,A]=a.useState(""),[g,N]=a.useState([]),[y,j]=a.useState([]),[E,p]=a.useState([]),[T,Q]=a.useState(!1);a.useEffect(()=>{if(n){const s=k.data.filter(l=>l.category_id===n);N(s||[]),j([]),p([]),f(""),i("service_id","")}},[n,h]),a.useEffect(()=>{if(o){const s=w.data.filter(l=>l.product_id===o);j(s||[]),p([]),i("service_id","")}},[o,g]),a.useEffect(()=>{if(v){const l=K.data.filter(c=>{const B=c.service_id===v,P=S.data.find(b=>b.user_id===x.user.id&&b.amount_kind_id===c.id||x.user.kind==="admin");return B&&P}).map(c=>({...c,kindName:c.kindName.name}));l.length>0?p(l):p([]),i("service_id","")}},[v,y]);const D=s=>{s.preventDefault(),console.log("bb"),C(route("comission.store"))};return e.jsxs(W,{user:x.user,message:_,header:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(J,{children:"إنشاء عمولة جديد"}),e.jsx(z,{message:_})]}),children:[e.jsx(L,{title:"العمولات"}),e.jsx("div",{className:"py-2",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("form",{onSubmit:D,className:"px-4 sm:px-8 pt-4 bg-white dark:bg-gray-800 shadow sm:rounded-lg",children:[e.jsxs("div",{className:"grid lg:grid-cols-3 sm:grid-cols-1",children:[e.jsxs("div",{className:"mt-4 px-3",children:[e.jsx(d,{htmlFor:"category_id",value:"التصنيف"}),e.jsx(u,{items:h.data,value:n,onChange:s=>I(s),placeholder:"اختر التصنيف",labelKey:"name",valueKey:"id"}),e.jsx(r,{message:t.category_id,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4 px-3",children:[e.jsx(d,{htmlFor:"product_id",value:"المنتج"}),e.jsx(u,{items:g,value:o,onChange:s=>f(s),placeholder:"اختر المنتج",labelKey:"name",valueKey:"id",disabled:!n}),e.jsx(r,{message:t.product_id,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4 px-3",children:[e.jsx(d,{htmlFor:"service_id",value:"الخدمة"}),e.jsx(u,{items:y,value:m.service_id,onChange:s=>A(s),placeholder:"اختر الخدمة",labelKey:"name",valueKey:"id",disabled:!o}),e.jsx(r,{message:t.service_id,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4 px-3",children:[e.jsx(d,{htmlFor:"kind_id",value:"تفاصيل الخدمة"}),e.jsx(u,{items:E,value:m.amount_kind_id,onChange:s=>i("amount_kind_id",s),placeholder:"اختر تفاصيل الخدمة",labelKey:"kindName",valueKey:"id",disabled:!o}),e.jsx(r,{message:t.amount_kind_id,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4 px-3",children:[e.jsx(d,{htmlFor:"user_id",value:"المركز"}),e.jsx(u,{items:F.data,value:m.user_id,onChange:s=>i("user_id",s),placeholder:"اختر المركز",labelKey:"name",valueKey:"id",disabled:!1}),e.jsx(r,{message:t.user_id,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4 px-3",children:[e.jsx(d,{htmlFor:"comission_admin",value:"العمولة"}),e.jsx(H,{id:"comission_admin",type:"number",min:"0",name:"comission_admin",value:m.comission_admin,className:" block w-full h-[40px]",disabled:T,onChange:s=>i("comission_admin",s.target.value)}),e.jsx(r,{message:t.comission_admin,className:"mt-2"})]})]}),e.jsxs("div",{className:"mt-4 px-3",children:[e.jsx(d,{htmlFor:"category_notes",value:"ملاحظات"}),e.jsx(G,{id:"category_notes",name:"notes",value:m.notes,className:"mt-1 block w-full",onChange:s=>i("notes",s.target.value)}),e.jsx(r,{message:t.notes,className:"mt-2"})]}),e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Y,{className:"w-28 justify-center",children:"موافق"}),e.jsx(M,{href:route("comission.index"),children:e.jsx(q,{className:"w-28 justify-center",children:"إلغاء الأمر"})})]})]})})})})]})}export{ue as default};
