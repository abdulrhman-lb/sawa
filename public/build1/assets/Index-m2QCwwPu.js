import{r as i,j as e,Y as T,y as h}from"./app-4CarAZae.js";import{P as A}from"./Pagination-CSCna3ch.js";import{A as M,a as L,R as I}from"./AuthenticatedLayout-DlZAqirn.js";import{T as r}from"./TableHeading-2ju96-yK.js";import{M as R}from"./Modal-DeS_P8Lr.js";import{T as g}from"./TextInput-DyNG2S4m.js";import{P as D}from"./PrimaryButton-D4siN8KF.js";import{D as F}from"./DeleteButton-CfGaPNIM.js";import{I as H}from"./InputError-BzZEBFuT.js";import{S as U}from"./ScrollBar-2ExapV3B.js";import{S as W}from"./SuccessMessage-CL-2JUjC.js";import{T as Y}from"./Title-Dy3FFUwd.js";import"./ApplicationLogo-Dv8uwSlW.js";import"./transition-B3zTIZ2S.js";import"./NavLink-Bq0O64v2.js";import"./DarkMode-Bf1Neqjf.js";import"./iconBase-TbwvlisU.js";import"./ResponsiveMenu-BnbI3YqC.js";import"./index-_Gq6pFcl.js";function ae({auth:N,center_balance:x,total_add_all:u,total_reduce_all:_,total_profit_all:k,final_balance_all:v,final_balance_all_test:y,queryParams:s=null,message:p,success:j}){s=s||{};const[w,o]=i.useState(!1),[l,S]=i.useState(null),[a,n]=i.useState(0),[f,c]=i.useState(null),[C,m]=i.useState(""),d=t=>{t===s.sort_field?s.sort_direction=s.sort_direction==="asc"?"desc":"asc":(s.sort_field=t,s.sort_direction="asc"),s.page=1,h.get(route("center.balances.home"),s)},E=t=>{S(t),n(t.add),c(t.statment),o(!0)},b=()=>{a<=0?m("القيمة يجب أن تكون أكبر من الصفر"):m(""),a>0&&(h.post(route("center-balance.update",l),{user_id:l.user.id,add:a,statment:f||"-",_method:"PUT"}),o(!1),c(""),n(0),m(0))},B=t=>{window.confirm("هل تريد بالتأكيد حذف هذا الايداع ؟")&&h.delete(route("center-balance.destroy",t.id))};return e.jsxs(M,{user:N.user,message:p,header:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(Y,{children:["حركة رصيد المركز : ",x.data[0].user.name]}),e.jsx(U,{message:p})]}),children:[e.jsx(T,{title:"حركة رصيد مركز"}),e.jsx(R,{show:w,onClose:()=>o(!1),maxWidth:"md",children:e.jsxs("div",{className:"p-6 dark:text-white text-gray-900",children:[e.jsxs("h2",{className:"text-lg font-medium",children:["تعديل حركة ايداع رصيد : ",l&&l.user.name]}),e.jsx("p",{className:"mt-4",children:"يمكنك تعديل القيمة أو البيان فقط"}),e.jsx("div",{children:e.jsx(g,{type:"number",className:"mt-4",placeholder:"المبلغ",value:a,onChange:t=>n(t.target.value)})}),e.jsx(H,{message:C,className:"mt-2"}),e.jsx("div",{children:e.jsx(g,{className:"mt-4",placeholder:"البيان",value:f,onChange:t=>c(t.target.value)})}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(L,{onClick:b,children:"موافق"}),e.jsx(I,{onClick:()=>(o(!1),n(0),c("")),children:"إلغاء"})]})]})}),e.jsx("div",{className:"py-2",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[j&&e.jsx(W,{message:j}),e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-2 text-gray-900 dark:text-gray-100",children:[e.jsx("div",{className:"overflow-auto",children:e.jsxs("table",{className:"w-full text-md font-semibold rtl:text-right text-gray-800 dark:text-gray-200",children:[e.jsx("thead",{className:"text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400 border-b-2 border-gray-500",children:e.jsxs("tr",{className:"text-nowrap",children:[e.jsx(r,{name:"date",sort_field:s.sort_field,sort_direction:s.sort_direction,sortChanged:d,children:"التاريخ"}),e.jsx(r,{name:"category",sort_field:s.sort_field,sort_direction:s.sort_direction,sortChanged:d,children:"حركات الايداع"}),e.jsx(r,{name:"center.name",sort_field:s.sort_field,sort_direction:s.sort_direction,sortChanged:d,children:"حركات السحب"}),e.jsx(r,{name:"total_add",sort_field:s.sort_field,sort_direction:s.sort_direction,sortChanged:d,children:"الربح"}),e.jsx(r,{name:"total_reduce",sort_field:s.sort_field,sort_direction:s.sort_direction,sortChanged:d,children:"البيان"}),e.jsx(r,{name:"final_balance",sort_field:s.sort_field,sort_direction:s.sort_direction,sortChanged:d,children:"التفاصيل"}),e.jsx(r,{sortable:!1,children:"التحكم"})]})}),e.jsx("tbody",{className:"text-center",children:x.data.map(t=>e.jsxs("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700",children:[e.jsx("td",{className:"px-3 py-2",children:t.created_at}),e.jsx("td",{className:"px-3 py-2",children:t.add.toLocaleString()}),e.jsx("td",{className:"px-3 py-2",children:t.reduce.toLocaleString()}),e.jsx("td",{className:"px-3 py-2",children:t.profit.toLocaleString()}),e.jsx("td",{className:"px-3 py-2",children:t.statment}),e.jsx("td",{className:"px-3 py-2",children:t.order?t.order.user.name+" / "+t.order.service.name+" / "+t.order.amount_kind.kindName.name:"-"}),e.jsx("td",{className:"px-3 py-2 text-nowrap",children:t.order?e.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-500 mx-1",children:"لا يمكن التعديل"}):e.jsxs(e.Fragment,{children:[e.jsx(D,{onClick:()=>E(t),children:"تعديل"}),e.jsx(F,{onClick:$=>B(t),children:"حذف"})]})})]},t.id))}),e.jsx("tfoot",{className:"text-center",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3",children:"المجموع"}),e.jsx("th",{className:"px-3 py-3",children:u}),e.jsx("th",{className:"px-3 py-3",children:_}),e.jsx("th",{className:"px-3 py-3",children:k}),e.jsxs("th",{className:`px-3 py-2 ${y<0?"text-red-500":"text-green-500"}`,children:["الرصيد الفعلي النهائي للمركز : ",v]})]})})]})}),e.jsx(A,{links:x.meta.links,queryParams:s})]})})]})})]})}export{ae as default};
