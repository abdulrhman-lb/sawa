import{r,j as o,R as j}from"./app-4CarAZae.js";import{T as N}from"./TextInput-DyNG2S4m.js";function C({items:s,name:l,queryParams:i,selectedItem:c,onSelectItem:w,placeholder:f="اختر عنصرًا"}){const[u,n]=r.useState(!1),[g,x]=r.useState(""),[a,b]=r.useState({top:0,left:0,width:0}),[y,p]=r.useState(c?c.name:f),d=r.useRef(null);r.useEffect(()=>{const e=s.find(t=>t.id==i[l]);e&&p(e.name)},[i,s,l]),r.useEffect(()=>{const e=t=>{d.current&&!d.current.contains(t.target)&&n(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);const m=s.filter(e=>e.name.toLowerCase().includes(g.toLowerCase())),k=e=>{const t=e.currentTarget.getBoundingClientRect();b({top:t.bottom,left:t.left,width:t.width>200?t.width:200}),n(!u)},h=e=>{p(e.name),w(e),n(!1)},v=o.jsxs("div",{style:{top:a.top,left:a.left,width:a.width},className:"absolute bg-white dark:bg-gray-900 border border-gray-300 rounded mt-1 z-50",onMouseDown:e=>e.stopPropagation(),children:[o.jsx(N,{className:"w-full mb-2 p-2 border-b border-gray-300 text-sm",placeholder:"ابحث...",value:g,onChange:e=>x(e.target.value),onMouseDown:e=>e.stopPropagation()}),o.jsxs("ul",{className:"max-h-60 overflow-y-auto text-gray-900 dark:text-white text-sm",children:[o.jsx("li",{className:"px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 cursor-pointer",onMouseDown:e=>{e.stopPropagation(),h({id:0,name:"عرض الكل"})},children:"عرض الكل"}),m.map(e=>o.jsx("li",{className:"px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 cursor-pointer",onMouseDown:t=>{t.stopPropagation(),h(e)},children:e.name},e.id)),m.length===0&&o.jsx("li",{className:"px-4 py-2 text-gray-500 dark:text-gray-400",children:"لا توجد نتائج"})]})]});return o.jsxs("div",{className:"relative w-full",ref:d,children:[o.jsxs("button",{type:"button",onClick:k,className:"w-full font-medium text-sm text-right p-2 flex border-2 border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",children:[o.jsx("svg",{className:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})}),y]}),u&&j.createPortal(v,document.body)]})}export{C as S};
