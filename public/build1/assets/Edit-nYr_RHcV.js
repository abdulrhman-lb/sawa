import{W as E,r as t,j as e,Y as I,a as k}from"./app-4CarAZae.js";import{A as D,a as P,R as T}from"./AuthenticatedLayout-DlZAqirn.js";import{I as d}from"./InputError-BzZEBFuT.js";import{I as l}from"./InputLabel-D2XIgsB6.js";import{S as A}from"./ScrollBar-2ExapV3B.js";import{S as n}from"./SearchableDropdownForm-D-zmHbTx.js";import{T as B}from"./TextInput-DyNG2S4m.js";import{T as R}from"./Title-Dy3FFUwd.js";import"./ApplicationLogo-Dv8uwSlW.js";import"./transition-B3zTIZ2S.js";import"./NavLink-Bq0O64v2.js";import"./DarkMode-Bf1Neqjf.js";import"./iconBase-TbwvlisU.js";import"./ResponsiveMenu-BnbI3YqC.js";import"./index-_Gq6pFcl.js";import"./Modal-DeS_P8Lr.js";function ee({auth:y,categories:x,products:N,services:b,kinds:S,amount_kind:a,message:p}){const{data:c,setData:r,put:w,errors:i}=E({amount:a.amount||"0",kind:a.kind||"const",service_id:a.service_id||"",kind_id:a.kind_id||""}),[o,K]=t.useState(a.service.product.category_id||""),[m,u]=t.useState(""),[h,F]=t.useState([]),[_,j]=t.useState([]),[f,g]=t.useState(c.kind==="var");t.useEffect(()=>{if(o){const s=N.data.filter(v=>v.category_id===o);F(s||[]),j([]),a.service&&a.service.product&&a.service.product.id&&u(a.service.product.id)}},[o,x]),t.useEffect(()=>{if(m){const s=b.data.filter(v=>v.product_id===m);j(s||[]),r("service_id",a.service_id||"")}},[m,h]),t.useEffect(()=>{a.service&&a.service.product&&a.service.product.id&&u(a.service.product.id)},[a]);const C=s=>{s.preventDefault(),w(route("amountkind.update",a.id))};return e.jsxs(D,{user:y.user,message:p,header:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(R,{children:"تعديل سعر المنتج"}),e.jsx(A,{message:p})]}),children:[e.jsx(I,{title:"تعديل سعر المنتج"}),e.jsx("div",{className:"py-2",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("form",{onSubmit:C,className:"px-4 sm:px-8 pt-4 bg-white dark:bg-gray-800 shadow sm:rounded-lg",children:[e.jsxs("div",{className:"grid lg:grid-cols-3 sm:grid-cols-1 gap-4",children:[e.jsxs("div",{className:"mt-1",children:[e.jsx(l,{htmlFor:"category_id",value:"التصنيف"}),e.jsx(n,{items:x.data,value:o,onChange:s=>K(s),placeholder:"اختر التصنيف",labelKey:"name",valueKey:"id"}),e.jsx(d,{message:i.category_id,className:"mt-2"})]}),e.jsxs("div",{className:"mt-1",children:[e.jsx(l,{htmlFor:"product_id",value:"المنتج"}),e.jsx(n,{items:h,value:m,onChange:s=>u(s),placeholder:"اختر المنتج",labelKey:"name",valueKey:"id",disabled:!o}),e.jsx(d,{message:i.product_id,className:"mt-2"})]}),e.jsxs("div",{className:"mt-1",children:[e.jsx(l,{htmlFor:"service_id",value:"الخدمة"}),e.jsx(n,{items:_,value:c.service_id,onChange:s=>r("service_id",s),placeholder:"اختر الخدمة",labelKey:"name",valueKey:"id",disabled:!m}),e.jsx(d,{message:i.service_id,className:"mt-2"})]}),e.jsxs("div",{className:"mt-1",children:[e.jsx(l,{htmlFor:"kind_id",value:"تفاصيل الخدمة"}),e.jsx(n,{items:S.data,value:c.kind_id,onChange:s=>r("kind_id",s),placeholder:"اختر تفصيل الخدمة",labelKey:"name",valueKey:"id",disabled:f}),e.jsx(d,{message:i.kind_id,className:"mt-2"})]}),e.jsxs("div",{className:"mt-1",children:[e.jsx(l,{htmlFor:"kind",value:"طريقة الحساب"}),e.jsx(n,{items:[{id:"const",name:"ثابت"},{id:"var",name:"متغير"}],value:c.kind,onChange:s=>{s==="var"?(r({amount:0,kind:s}),g(!0)):(r("kind",s),g(!1))},placeholder:"اختر طريقة الحساب",labelKey:"name",valueKey:"id"}),e.jsx(d,{message:i.kind,className:"mt-2"})]}),e.jsxs("div",{className:"mt-1",children:[e.jsx(l,{htmlFor:"amount",value:"السعر"}),e.jsx(B,{id:"amount",type:"number",min:"0",name:"amount",value:c.amount,className:"block w-full h-10",disabled:f,onChange:s=>r("amount",s.target.value)}),e.jsx(d,{message:i.amount,className:"mt-2"})]})]}),e.jsxs("div",{className:"text-center py-8",children:[e.jsx(P,{className:"w-28 justify-center",children:"موافق"}),e.jsx(k,{href:route("amountkind.index"),children:e.jsx(T,{className:"w-28 justify-center",children:"إلغاء الأمر"})})]})]})})})})]})}export{ee as default};
