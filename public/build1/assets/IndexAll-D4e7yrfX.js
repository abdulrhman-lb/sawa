import{r,j as e,Y as F,y as c}from"./app-4CarAZae.js";import{P as H}from"./Pagination-CSCna3ch.js";import{A as W,a as Y,R as z}from"./AuthenticatedLayout-DlZAqirn.js";import{T as d}from"./TableHeading-2ju96-yK.js";import{S as b}from"./SearchableDropdown-BIbm-UtK.js";import{M as G}from"./Modal-DeS_P8Lr.js";import{T as S}from"./TextInput-DyNG2S4m.js";import{A as J}from"./AddButton-Cj9YlLQU.js";import{D as k}from"./DetailsButton-CgWO_I8Q.js";import{I as K}from"./InputError-BzZEBFuT.js";import{S as O}from"./ScrollBar-2ExapV3B.js";import{S as Q}from"./SuccessMessage-CL-2JUjC.js";import{T as U}from"./Title-Dy3FFUwd.js";import"./ApplicationLogo-Dv8uwSlW.js";import"./transition-B3zTIZ2S.js";import"./NavLink-Bq0O64v2.js";import"./DarkMode-Bf1Neqjf.js";import"./iconBase-TbwvlisU.js";import"./ResponsiveMenu-BnbI3YqC.js";import"./index-_Gq6pFcl.js";function me({auth:v,product_balances:h,categories:m,products:j,total_add_all:w,total_reduce_all:A,total_profit_all:C,final_balance_all:I,queryParams:s=null,message:f,success:g}){const[M,l]=r.useState(!1),[a,T]=r.useState(null),[i,n]=r.useState(0),[N,x]=r.useState(null),[B,p]=r.useState("");s=s||{};const E=t=>{T(t),l(!0)},y=t=>{c.get(route("product-balance.index",{product_id:t.product.id}))},D=()=>{i<=0?p("القيمة يجب أن تكون أكبر من الصفر"):p(""),i>0&&(c.post(route("product-balance.store"),{product_id:a.product.id,add:i,reduce:0,profit:0,statment:N||"-"}),l(!1),x(""),n(0),p(0))},L=t=>{u("product_id",t.id)},R=t=>{u("category_id",t.id)},u=(t,_)=>{_?s[t]=_:delete s[t],s.page=1,c.get(route("product.balances.home"),s)},o=t=>{t===s.sort_field?s.sort_direction=s.sort_direction==="asc"?"desc":"asc":(s.sort_field=t,s.sort_direction="asc"),s.page=1,c.get(route("product.balances.home"),s)};return e.jsxs(W,{user:v.user,message:f,header:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(U,{children:"أرصدة المنتجات"}),e.jsx(O,{message:f})]}),children:[e.jsx(F,{title:"أرصدة المنتجات"}),e.jsx(G,{show:M,onClose:()=>l(!1),maxWidth:"md",children:e.jsxs("div",{className:"p-6 dark:text-white text-gray-900",children:[e.jsxs("h2",{className:"text-lg font-medium",children:["إضافة رصيد منتج : ",a&&a.product.category.name+" / "+a.product.name]}),e.jsx("p",{className:"mt-4",children:"أدخل القيمة التي تريد شحن رصيد المنتج بها"}),e.jsx("div",{children:e.jsx(S,{type:"number",className:"mt-4",placeholder:"المبلغ",value:i,onChange:t=>n(t.target.value)})}),e.jsx(K,{message:B,className:"mt-2"}),e.jsx("div",{children:e.jsx(S,{className:"mt-4",placeholder:"البيان",value:N,onChange:t=>x(t.target.value)})}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(Y,{onClick:D,children:"موافق"}),e.jsx(z,{onClick:()=>(l(!1),n(0),x("")),children:"إلغاء"})]})]})}),e.jsx("div",{className:"py-2",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[g&&e.jsx(Q,{message:g}),e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-2 text-gray-900 dark:text-gray-100",children:[e.jsx("div",{className:"overflow-auto",children:e.jsxs("table",{className:"w-full text-md font-semibold rtl:text-right text-gray-800 dark:text-gray-200",children:[e.jsx("thead",{className:"text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400 border-b-2 border-gray-500",children:e.jsxs("tr",{className:"text-nowrap",children:[e.jsx(d,{name:"category_id",sort_field:s.sort_field,sort_direction:s.sort_direction,sortChanged:o,children:"التصنيف"}),e.jsx(d,{name:"name",sort_field:s.sort_field,sort_direction:s.sort_direction,sortChanged:o,children:"المنتج"}),e.jsx(d,{sortable:!1,children:"ايداع"}),e.jsx(d,{sortable:!1,children:"سحب"}),e.jsx(d,{name:"final_balance",sort_field:s.sort_field,sort_direction:s.sort_direction,sortChanged:o,children:"الرصيد الصافي"}),e.jsx(d,{name:"profit",sort_field:s.sort_field,sort_direction:s.sort_direction,sortChanged:o,children:"صافي الربح"}),e.jsx(d,{sortable:!1,children:"التحكم"})]})}),e.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400 border-b-2 border-gray-500",children:e.jsxs("tr",{className:"text-nowrap",children:[e.jsx("th",{className:"px-3 py-3 relative",children:e.jsx(b,{items:m.data,name:"category_id",selectedItem:m.data.find(t=>t.id===s.category_id),onSelectItem:R,placeholder:"اختر التصنيف",queryParams:s})}),e.jsx("th",{className:"px-3 py-3 relative",children:e.jsx(b,{items:j.data,name:"product_id",selectedItem:j.data.find(t=>t.id===s.product_id),onSelectItem:L,placeholder:"اختر المنتج",queryParams:s})}),e.jsx("th",{className:"px-3 py-3"}),e.jsx("th",{className:"px-3 py-3"}),e.jsx("th",{className:"px-3 py-3"}),e.jsx("th",{className:"px-3 py-3"}),e.jsx("th",{className:"px-3 py-3"})]})}),e.jsx("tbody",{className:"text-center",children:h.data.map(t=>e.jsxs("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700",children:[e.jsx("td",{className:"px-3 py-2",children:t.product.category.name}),e.jsx("td",{className:"px-3 py-2",children:t.product.name}),e.jsx("td",{className:"px-3 py-2",children:t.total_add.toLocaleString()}),e.jsx("td",{className:"px-3 py-2",children:t.total_reduce.toLocaleString()}),e.jsx("td",{className:"px-3 py-2",children:t.final_balance}),e.jsx("td",{className:"px-3 py-2",children:t.total_profit}),e.jsxs("td",{className:"px-3 py-2 text-nowrap",children:[t.total_add===0&&t.total_reduce===0?e.jsx(k,{disabled:!0,onClick:()=>y(t),children:"عرض التفاصيل"}):e.jsx(k,{onClick:()=>y(t),children:"عرض التفاصيل"}),e.jsx(J,{onClick:()=>E(t),children:"إضافة رصيد"})]})]},t.product.id))}),e.jsx("tfoot",{className:"text-center",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3",children:"المجموع"}),e.jsx("th",{className:"px-3 py-3"}),e.jsx("th",{className:"px-3 py-3",children:w}),e.jsx("th",{className:"px-3 py-3",children:A}),e.jsx("th",{className:"px-3 py-3",children:I}),e.jsx("th",{className:"px-3 py-3",children:C})]})})]})}),e.jsx(H,{links:h.links,queryParams:s})]})})]})})]})}export{me as default};
